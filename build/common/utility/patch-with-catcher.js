import Layer from 'express/lib/router/layer';
import { runAsyncWrapper } from './run-async-wrapper';
const handle_request = Layer.prototype.handle_request;
Layer.prototype.handle_request = function () {
    if (!this.isWrapped && this.method) {
        this.handle = runAsyncWrapper(this.handle);
        this.isWrapped = true;
    }
    // eslint-disable-next-line prefer-rest-params
    return handle_request.apply(this, arguments);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF0Y2gtd2l0aC1jYXRjaGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1vbi91dGlsaXR5L3BhdGNoLXdpdGgtY2F0Y2hlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssTUFBTSwwQkFBMEIsQ0FBQztBQUM3QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFdEQsTUFBTSxjQUFjLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUM7QUFFdEQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLEdBQUc7SUFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ25DLElBQUksQ0FBQyxNQUFNLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUUzQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUN4QixDQUFDO0lBRUQsOENBQThDO0lBQzlDLE9BQU8sY0FBYyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDL0MsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExheWVyIGZyb20gJ2V4cHJlc3MvbGliL3JvdXRlci9sYXllcic7XHJcbmltcG9ydCB7IHJ1bkFzeW5jV3JhcHBlciB9IGZyb20gJy4vcnVuLWFzeW5jLXdyYXBwZXInO1xyXG5cclxuY29uc3QgaGFuZGxlX3JlcXVlc3QgPSBMYXllci5wcm90b3R5cGUuaGFuZGxlX3JlcXVlc3Q7XHJcblxyXG5MYXllci5wcm90b3R5cGUuaGFuZGxlX3JlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKCF0aGlzLmlzV3JhcHBlZCAmJiB0aGlzLm1ldGhvZCkge1xyXG4gICAgdGhpcy5oYW5kbGUgPSBydW5Bc3luY1dyYXBwZXIodGhpcy5oYW5kbGUpO1xyXG5cclxuICAgIHRoaXMuaXNXcmFwcGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcclxuICByZXR1cm4gaGFuZGxlX3JlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuIl19