import axios from 'axios';
import { v1 as uuidV1 } from 'uuid';
// import { ENV } from '../common/config';
import { getMessenger } from '../index';
import { localStg } from '../utils';
const baseURL = 'http://localhost:7000';
const localUid = localStg.get('uid');
const uid = localUid ? localUid : uuidV1();
localStg.set('uid', uid);
const chatId = '66b9a4edf5a564cae64892c3'; // ! rm
// let languageGetter = () => 'Uz-Latin';
// let appVersion = '1.0.0';
// const requiredHeaders = {
//   'x-device-type': 'web',
//   'x-device-model': ENV.isBrowser
//     ? `${navigator.userAgent} | ${navigator.platform}`
//     : ENV.isNode
//     ? `${process.platform} | ${process.arch} | Nodejs: ${process.version}`
//     : 'Unknown', // dynamically fetching device model info
//   'x-app-lang': languageGetter() || 'Uz-Latin', // dynamically fetching language info
//   'x-app-version': appVersion,
//   'x-app-uid': uid,
// };
const apiKey = 'qalqon';
const apiHash = '66b3576d917425b29a3e3644';
const messenger = getMessenger({
    baseURL,
    apiKey,
    apiHash,
    languageGetter() {
        return 'Uz-Latin';
    },
    token: async () => {
        const token = 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoyMDA5LCJ1c2VybmFtZSI6IlVtYXJiZWsiLCJmdWxsX25hbWUiOiJBS0JBUk9WIFVNQVIiLCJwaG9uZV9udW1iZXIiOiIrOTk4OTQ1NDM0NTY3IiwiZ3JvdXAiOnsiaWQiOjIsIm5hbWUiOiJBZG1pbiIsImFjY2Vzc2VzIjpbM119LCJvcmdhbml6YXRpb25faWQiOm51bGwsInNlcnZpY2VzIjpbeyJpZCI6MiwibmFtZSI6Im50ZmFjZSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NiwibmFtZSI6InhhdGxvdiIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MTQsIm5hbWUiOiJlbWVobW9uIiwic3RhdHVzIjp0cnVlfSx7ImlkIjoxNiwibmFtZSI6ImF1dG8tdHJhbnNwb3J0Iiwic3RhdHVzIjp0cnVlfSx7ImlkIjoxOCwibmFtZSI6ImFjY2lkZW50cyIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MjAsIm5hbWUiOiJkaGEiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjIxLCJuYW1lIjoiZm9ybWExIiwic3RhdHVzIjp0cnVlfSx7ImlkIjoyMiwibmFtZSI6Iml2c3MtbWFuYWdlciIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MjcsIm5hbWUiOiJxdWljay1zZWFyY2giLCJzdGF0dXMiOnRydWV9LHsiaWQiOjI5LCJuYW1lIjoiY2FtZXJhIiwic3RhdHVzIjp0cnVlfSx7ImlkIjozMCwibmFtZSI6ImZ2diIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MzEsIm5hbWUiOiJncHMiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjMyLCJuYW1lIjoic2F5bG92Iiwic3RhdHVzIjp0cnVlfSx7ImlkIjozNCwibmFtZSI6Imxpc3RlZC1wZW9wbGUiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjM2LCJuYW1lIjoidGFkYmlyIiwic3RhdHVzIjp0cnVlfSx7ImlkIjozOCwibmFtZSI6Im10cCIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NDAsIm5hbWUiOiJjcmltZSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NDEsIm5hbWUiOiJjYXIiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjQyLCJuYW1lIjoib3BnIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0MywibmFtZSI6Im1pYiIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NDQsIm5hbWUiOiJzZXJ2aWNlIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0NSwibmFtZSI6Im5vdGlmaWNhdGlvbnMiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjQ2LCJuYW1lIjoidGVlbmFnZXJzIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0NywibmFtZSI6ImJ1cy1wYXJraW5nIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0OCwibmFtZSI6ImRldGVjdG9yIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0OSwibmFtZSI6ImFkZC1jYW1lcmEiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjUwLCJuYW1lIjoiaXZzcy1jb250cm9sIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo1MSwibmFtZSI6IjV0YXNoYWJidXMiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjUyLCJuYW1lIjoibG9nZ2VyIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo1MywibmFtZSI6InNjbyIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NTQsIm5hbWUiOiJsYW5ndWFnZSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NTUsIm5hbWUiOiJzdXBlcnZpc29yIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo1NywibmFtZSI6Im15LWluc3BlY3RvciIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NTksIm5hbWUiOiJib2R5LWNhbWVyYSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NjAsIm5hbWUiOiJlbWlncmFudCIsInN0YXR1cyI6dHJ1ZX1dLCJkaXN0cmljdElkIjpudWxsLCJoYXNoIjoiMGYxNThjNmEzMTQ5ZGIyZGYzODU5ZjcyNWRmYzljY2UifSwiaWF0IjoxNzIzNjMwMTczLCJleHAiOjE3MjM3MTY1NzN9.dcURCsNHT2m7ssCe1xyxFFf6ydXFft3qSEk37Fb2KFE';
        const { data } = await axios.get(`${baseURL}/v1/auth/me-from?token=${token}`, {
            headers: {
                Authorization: `Basic ${btoa(`${apiKey}:${apiHash}`)}`,
            },
        });
        return {
            access: data.data.token.accessToken,
            refresh: data.data.token.refreshToken,
        };
        // const res = await axios.post(
        //   `${baseURL}/v1/auth/login`,
        //   {
        //     username: 'Umarkhan', // Adhamjon, Umarkhan
        //     password: '123',
        //   },
        //   {
        //     headers: requiredHeaders,
        //   },
        // );
        // return {
        //   access: res.data.data.token.accessToken,
        //   refresh: res.data.data.token.refreshToken,
        // };
    },
    polling: { interval: 5_000, limit: 100 },
});
console.log('Success started');
messenger
    .on('connect', (...args) => {
    console.log('connected', args);
})
    .on('reconnect_attempt', (...args) => {
    console.log('reconnect_attempt', args);
})
    .on('reconnect', (...args) => {
    console.log('reconnect', args);
})
    .on('disconnect', (reason, details) => {
    console.log('disconnect', reason);
})
    .on('pong', () => {
    console.log('pong');
})
    .on('update', (data) => {
    console.log(data._id, 'update');
})
    .on('chatAction', (action) => {
    console.log(action, 'chatAction');
});
const getRadomNumber = (from, to) => from + Math.round(Math.random() * (to - from));
setInterval(async () => {
    let message;
    const random = getRadomNumber(0, 100);
    // const random = 3;
    if (random % 2 === 0) {
        message = {
            messageType: 'text',
            to: { chatType: 'private', chatId: chatId },
            text: `Test xabar ${Math.random() * 100}. Time: ${new Date().toISOString()}`,
        };
    }
    else {
        const wanted = {
            type: 'user',
            title: 'MVD-Qidiruv',
            user: {
                firstName: 'Qumriniso',
                image: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                // fullImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                lastName: 'Qambarov',
                middleName: 'Qulmiddin qizi',
                fullName: 'Qambarov Qumriniso Qulmiddin qizi',
                pAddress: 'Qashqadaryo Viloyat, Kitob Tuman, Qashqir qishloq',
                passport: 'AA8432720',
                birthDate: '19.05.1981',
            },
            car: {
                carImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                carNumber: '01O010OO',
            },
            images: [
                'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
            ],
            // fullImages: ['http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG'],
            initiator: 'ЖАЛАКУДУКСКИЙ РОВД',
            address: 'Туркистон кўчаси, Dehqon bozori',
            text: `Test xabar ${Math.random() * 100}. Time: ${new Date().toISOString()}`,
            mera: 'АРЕСТ',
            region: 'ОЛМАЛИК ШАҲРИ',
            statya: '139 ч.3 п.А;140 ч.1',
            rozType: 'МЕЖГОСУДАРСТВЕННЫЙ Р',
            sender: {
                firstName: 'MAMURAXON',
                lastName: 'ASADOVA',
                middleName: 'CHIRMASHEVNA',
                fullName: 'ASADOVA MAMURAXON CHIRMASHEVNA',
            },
            location: [40.84764631407434, 69.61757628864146],
            // fullImage: 'ivss_images/full_image_0ab1cece-d8bc-42ea-af6a-067206810dbd.jpg',
            // takenImage: 'ivss_images/taken_image_47fbc602-65ea-460a-bbd8-051c9df946f0.jpg',
            objectName: 'Дехқон бозори',
            wantedDate: new Date('07.31.2019').toISOString(),
        };
        if (random % 3 === 0) {
            wanted.user = null;
            wanted.type = 'car';
        }
        else {
            wanted.car = null;
        }
        message = {
            messageType: 'wanted',
            to: { chatType: 'private', chatId: chatId },
            wanted: wanted,
            text: null,
        };
    }
    await messenger
        .sendMessage(message)
        .then((res) => {
        console.log(res, 'Success sended');
        return res.data;
    })
        .catch((err) => {
        console.log(err.response?.data, 'err');
    });
}, 1_000);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXhhbXBsZXMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQzFCLE9BQU8sRUFBRSxFQUFFLElBQUksTUFBTSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3BDLDBDQUEwQztBQUMxQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFFcEMsTUFBTSxPQUFPLEdBQUcsdUJBQXVCLENBQUM7QUFDeEMsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQyxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDM0MsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFekIsTUFBTSxNQUFNLEdBQUcsMEJBQTBCLENBQUMsQ0FBQyxPQUFPO0FBRWxELHlDQUF5QztBQUN6Qyw0QkFBNEI7QUFFNUIsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1QixvQ0FBb0M7QUFDcEMseURBQXlEO0FBQ3pELG1CQUFtQjtBQUNuQiw2RUFBNkU7QUFDN0UsNkRBQTZEO0FBQzdELHdGQUF3RjtBQUN4RixpQ0FBaUM7QUFDakMsc0JBQXNCO0FBQ3RCLEtBQUs7QUFFTCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUM7QUFDeEIsTUFBTSxPQUFPLEdBQUcsMEJBQTBCLENBQUM7QUFDM0MsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDO0lBQzdCLE9BQU87SUFDUCxNQUFNO0lBQ04sT0FBTztJQUNQLGNBQWM7UUFDWixPQUFPLFVBQVUsQ0FBQztJQUNwQixDQUFDO0lBQ0QsS0FBSyxFQUFFLEtBQUss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JztcclxuaW1wb3J0IHsgdjEgYXMgdXVpZFYxIH0gZnJvbSAndXVpZCc7XHJcbi8vIGltcG9ydCB7IEVOViB9IGZyb20gJy4uL2NvbW1vbi9jb25maWcnO1xyXG5pbXBvcnQgeyBnZXRNZXNzZW5nZXIgfSBmcm9tICcuLi9pbmRleCc7XHJcbmltcG9ydCB7IGxvY2FsU3RnIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuY29uc3QgYmFzZVVSTCA9ICdodHRwOi8vbG9jYWxob3N0OjcwMDAnO1xyXG5jb25zdCBsb2NhbFVpZCA9IGxvY2FsU3RnLmdldCgndWlkJyk7XHJcbmNvbnN0IHVpZCA9IGxvY2FsVWlkID8gbG9jYWxVaWQgOiB1dWlkVjEoKTtcclxubG9jYWxTdGcuc2V0KCd1aWQnLCB1aWQpO1xyXG5cclxuY29uc3QgY2hhdElkID0gJzY2YjlhNGVkZjVhNTY0Y2FlNjQ4OTJjMyc7IC8vICEgcm1cclxuXHJcbi8vIGxldCBsYW5ndWFnZUdldHRlciA9ICgpID0+ICdVei1MYXRpbic7XHJcbi8vIGxldCBhcHBWZXJzaW9uID0gJzEuMC4wJztcclxuXHJcbi8vIGNvbnN0IHJlcXVpcmVkSGVhZGVycyA9IHtcclxuLy8gICAneC1kZXZpY2UtdHlwZSc6ICd3ZWInLFxyXG4vLyAgICd4LWRldmljZS1tb2RlbCc6IEVOVi5pc0Jyb3dzZXJcclxuLy8gICAgID8gYCR7bmF2aWdhdG9yLnVzZXJBZ2VudH0gfCAke25hdmlnYXRvci5wbGF0Zm9ybX1gXHJcbi8vICAgICA6IEVOVi5pc05vZGVcclxuLy8gICAgID8gYCR7cHJvY2Vzcy5wbGF0Zm9ybX0gfCAke3Byb2Nlc3MuYXJjaH0gfCBOb2RlanM6ICR7cHJvY2Vzcy52ZXJzaW9ufWBcclxuLy8gICAgIDogJ1Vua25vd24nLCAvLyBkeW5hbWljYWxseSBmZXRjaGluZyBkZXZpY2UgbW9kZWwgaW5mb1xyXG4vLyAgICd4LWFwcC1sYW5nJzogbGFuZ3VhZ2VHZXR0ZXIoKSB8fCAnVXotTGF0aW4nLCAvLyBkeW5hbWljYWxseSBmZXRjaGluZyBsYW5ndWFnZSBpbmZvXHJcbi8vICAgJ3gtYXBwLXZlcnNpb24nOiBhcHBWZXJzaW9uLFxyXG4vLyAgICd4LWFwcC11aWQnOiB1aWQsXHJcbi8vIH07XHJcblxyXG5jb25zdCBhcGlLZXkgPSAncWFscW9uJztcclxuY29uc3QgYXBpSGFzaCA9ICc2NmIzNTc2ZDkxNzQyNWIyOWEzZTM2NDQnO1xyXG5jb25zdCBtZXNzZW5nZXIgPSBnZXRNZXNzZW5nZXIoe1xyXG4gIGJhc2VVUkwsXHJcbiAgYXBpS2V5LFxyXG4gIGFwaUhhc2gsXHJcbiAgbGFuZ3VhZ2VHZXR0ZXIoKSB7XHJcbiAgICByZXR1cm4gJ1V6LUxhdGluJztcclxuICB9LFxyXG4gIHRva2VuOiBhc3luYyAoKTogUHJvbWlzZTx7XHJcbiAgICBhY2Nlc3M6IHN0cmluZztcclxuICAgIHJlZnJlc2g6IHN0cmluZztcclxuICB9PiA9PiB7XHJcbiAgICBjb25zdCB0b2tlbiA9XHJcbiAgICAgICdCZWFyZXIgZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SjFjMlZ5SWpwN0ltbGtJam95TURBNUxDSjFjMlZ5Ym1GdFpTSTZJbFZ0WVhKaVpXc2lMQ0ptZFd4c1gyNWhiV1VpT2lKQlMwSkJVazlXSUZWTlFWSWlMQ0p3YUc5dVpWOXVkVzFpWlhJaU9pSXJPVGs0T1RRMU5ETTBOVFkzSWl3aVozSnZkWEFpT25zaWFXUWlPaklzSW01aGJXVWlPaUpCWkcxcGJpSXNJbUZqWTJWemMyVnpJanBiTTExOUxDSnZjbWRoYm1sNllYUnBiMjVmYVdRaU9tNTFiR3dzSW5ObGNuWnBZMlZ6SWpwYmV5SnBaQ0k2TWl3aWJtRnRaU0k2SW01MFptRmpaU0lzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk5pd2libUZ0WlNJNkluaGhkR3h2ZGlJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZNVFFzSW01aGJXVWlPaUpsYldWb2JXOXVJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpveE5pd2libUZ0WlNJNkltRjFkRzh0ZEhKaGJuTndiM0owSWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqb3hPQ3dpYm1GdFpTSTZJbUZqWTJsa1pXNTBjeUlzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk1qQXNJbTVoYldVaU9pSmthR0VpTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qSXhMQ0p1WVcxbElqb2labTl5YldFeElpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam95TWl3aWJtRnRaU0k2SW1sMmMzTXRiV0Z1WVdkbGNpSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TWpjc0ltNWhiV1VpT2lKeGRXbGpheTF6WldGeVkyZ2lMQ0p6ZEdGMGRYTWlPblJ5ZFdWOUxIc2lhV1FpT2pJNUxDSnVZVzFsSWpvaVkyRnRaWEpoSWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqb3pNQ3dpYm1GdFpTSTZJbVoyZGlJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZNekVzSW01aGJXVWlPaUpuY0hNaUxDSnpkR0YwZFhNaU9uUnlkV1Y5TEhzaWFXUWlPak15TENKdVlXMWxJam9pYzJGNWJHOTJJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvek5Dd2libUZ0WlNJNklteHBjM1JsWkMxd1pXOXdiR1VpTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qTTJMQ0p1WVcxbElqb2lkR0ZrWW1seUlpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam96T0N3aWJtRnRaU0k2SW0xMGNDSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TkRBc0ltNWhiV1VpT2lKamNtbHRaU0lzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk5ERXNJbTVoYldVaU9pSmpZWElpTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qUXlMQ0p1WVcxbElqb2liM0JuSWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqbzBNeXdpYm1GdFpTSTZJbTFwWWlJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZORFFzSW01aGJXVWlPaUp6WlhKMmFXTmxJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvME5Td2libUZ0WlNJNkltNXZkR2xtYVdOaGRHbHZibk1pTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qUTJMQ0p1WVcxbElqb2lkR1ZsYm1GblpYSnpJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvME55d2libUZ0WlNJNkltSjFjeTF3WVhKcmFXNW5JaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvME9Dd2libUZ0WlNJNkltUmxkR1ZqZEc5eUlpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8wT1N3aWJtRnRaU0k2SW1Ga1pDMWpZVzFsY21FaUxDSnpkR0YwZFhNaU9uUnlkV1Y5TEhzaWFXUWlPalV3TENKdVlXMWxJam9pYVhaemN5MWpiMjUwY205c0lpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8xTVN3aWJtRnRaU0k2SWpWMFlYTm9ZV0ppZFhNaUxDSnpkR0YwZFhNaU9uUnlkV1Y5TEhzaWFXUWlPalV5TENKdVlXMWxJam9pYkc5bloyVnlJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvMU15d2libUZ0WlNJNkluTmpieUlzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk5UUXNJbTVoYldVaU9pSnNZVzVuZFdGblpTSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TlRVc0ltNWhiV1VpT2lKemRYQmxjblpwYzI5eUlpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8xTnl3aWJtRnRaU0k2SW0xNUxXbHVjM0JsWTNSdmNpSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TlRrc0ltNWhiV1VpT2lKaWIyUjVMV05oYldWeVlTSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TmpBc0ltNWhiV1VpT2lKbGJXbG5jbUZ1ZENJc0luTjBZWFIxY3lJNmRISjFaWDFkTENKa2FYTjBjbWxqZEVsa0lqcHVkV3hzTENKb1lYTm9Jam9pTUdZeE5UaGpObUV6TVRRNVpHSXlaR1l6T0RVNVpqY3lOV1JtWXpsalkyVWlmU3dpYVdGMElqb3hOekl6TmpNd01UY3pMQ0psZUhBaU9qRTNNak0zTVRZMU56TjkuZGNVUkNzTkhUMm03c3NDZTF4eXhGRmY2eWRYRmZ0M3FTRWszN0ZiMktGRSc7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtiYXNlVVJMfS92MS9hdXRoL21lLWZyb20/dG9rZW49JHt0b2tlbn1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtidG9hKGAke2FwaUtleX06JHthcGlIYXNofWApfWAsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhY2Nlc3M6IGRhdGEuZGF0YS50b2tlbi5hY2Nlc3NUb2tlbixcclxuICAgICAgcmVmcmVzaDogZGF0YS5kYXRhLnRva2VuLnJlZnJlc2hUb2tlbixcclxuICAgIH07XHJcbiAgICAvLyBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KFxyXG4gICAgLy8gICBgJHtiYXNlVVJMfS92MS9hdXRoL2xvZ2luYCxcclxuICAgIC8vICAge1xyXG4gICAgLy8gICAgIHVzZXJuYW1lOiAnVW1hcmtoYW4nLCAvLyBBZGhhbWpvbiwgVW1hcmtoYW5cclxuICAgIC8vICAgICBwYXNzd29yZDogJzEyMycsXHJcbiAgICAvLyAgIH0sXHJcbiAgICAvLyAgIHtcclxuICAgIC8vICAgICBoZWFkZXJzOiByZXF1aXJlZEhlYWRlcnMsXHJcbiAgICAvLyAgIH0sXHJcbiAgICAvLyApO1xyXG5cclxuICAgIC8vIHJldHVybiB7XHJcbiAgICAvLyAgIGFjY2VzczogcmVzLmRhdGEuZGF0YS50b2tlbi5hY2Nlc3NUb2tlbixcclxuICAgIC8vICAgcmVmcmVzaDogcmVzLmRhdGEuZGF0YS50b2tlbi5yZWZyZXNoVG9rZW4sXHJcbiAgICAvLyB9O1xyXG4gIH0sXHJcbiAgcG9sbGluZzogeyBpbnRlcnZhbDogNV8wMDAsIGxpbWl0OiAxMDAgfSxcclxufSk7XHJcblxyXG5jb25zb2xlLmxvZygnU3VjY2VzcyBzdGFydGVkJyk7XHJcblxyXG5tZXNzZW5nZXJcclxuICAub24oJ2Nvbm5lY3QnLCAoLi4uYXJncykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ2Nvbm5lY3RlZCcsIGFyZ3MpO1xyXG4gIH0pXHJcbiAgLm9uKCdyZWNvbm5lY3RfYXR0ZW1wdCcsICguLi5hcmdzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygncmVjb25uZWN0X2F0dGVtcHQnLCBhcmdzKTtcclxuICB9KVxyXG4gIC5vbigncmVjb25uZWN0JywgKC4uLmFyZ3MpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdyZWNvbm5lY3QnLCBhcmdzKTtcclxuICB9KVxyXG4gIC5vbignZGlzY29ubmVjdCcsIChyZWFzb24sIGRldGFpbHMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdkaXNjb25uZWN0JywgcmVhc29uKTtcclxuICB9KVxyXG4gIC5vbigncG9uZycsICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdwb25nJyk7XHJcbiAgfSlcclxuICAub24oJ3VwZGF0ZScsIChkYXRhOiBNZXNzZW5nZXIuSU9uVXBkYXRlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhLl9pZCwgJ3VwZGF0ZScpO1xyXG4gIH0pXHJcbiAgLm9uKCdjaGF0QWN0aW9uJywgKGFjdGlvbikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYWN0aW9uLCAnY2hhdEFjdGlvbicpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgZ2V0UmFkb21OdW1iZXIgPSAoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSA9PiBmcm9tICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKHRvIC0gZnJvbSkpO1xyXG5cclxuc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xyXG4gIGxldCBtZXNzYWdlOiBBcGlNZXNzYWdlTWFuYWdlbWVudC5JU2VuZE1lc3NhZ2U7XHJcbiAgY29uc3QgcmFuZG9tID0gZ2V0UmFkb21OdW1iZXIoMCwgMTAwKTtcclxuICAvLyBjb25zdCByYW5kb20gPSAzO1xyXG4gIGlmIChyYW5kb20gJSAyID09PSAwKSB7XHJcbiAgICBtZXNzYWdlID0ge1xyXG4gICAgICBtZXNzYWdlVHlwZTogJ3RleHQnLFxyXG4gICAgICB0bzogeyBjaGF0VHlwZTogJ3ByaXZhdGUnLCBjaGF0SWQ6IGNoYXRJZCB9LFxyXG4gICAgICB0ZXh0OiBgVGVzdCB4YWJhciAke01hdGgucmFuZG9tKCkgKiAxMDB9LiBUaW1lOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1gLFxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3Qgd2FudGVkOiBBcGlNZXNzYWdlTWFuYWdlbWVudC5JQ2hhdE1lc3NhZ2VXYW50ZWQgPSB7XHJcbiAgICAgIHR5cGU6ICd1c2VyJyxcclxuICAgICAgdGl0bGU6ICdNVkQtUWlkaXJ1dicsXHJcbiAgICAgIHVzZXI6IHtcclxuICAgICAgICBmaXJzdE5hbWU6ICdRdW1yaW5pc28nLFxyXG4gICAgICAgIGltYWdlOlxyXG4gICAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC92MS9maWxlcy9wcm9maWxlX3Bob3Rvcy9kMWRmODhkYy02MmI2LTRiYTctOWE1Zi05NjY5YmU5MDQwYTMuSlBFRycsXHJcbiAgICAgICAgLy8gZnVsbEltYWdlOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2ZpbGVzL3Byb2ZpbGVfcGhvdG9zL2QxZGY4OGRjLTYyYjYtNGJhNy05YTVmLTk2NjliZTkwNDBhMy5KUEVHJyxcclxuICAgICAgICBsYXN0TmFtZTogJ1FhbWJhcm92JyxcclxuICAgICAgICBtaWRkbGVOYW1lOiAnUXVsbWlkZGluIHFpemknLFxyXG4gICAgICAgIGZ1bGxOYW1lOiAnUWFtYmFyb3YgUXVtcmluaXNvIFF1bG1pZGRpbiBxaXppJyxcclxuICAgICAgICBwQWRkcmVzczogJ1Fhc2hxYWRhcnlvIFZpbG95YXQsIEtpdG9iIFR1bWFuLCBRYXNocWlyIHFpc2hsb3EnLFxyXG4gICAgICAgIHBhc3Nwb3J0OiAnQUE4NDMyNzIwJyxcclxuICAgICAgICBiaXJ0aERhdGU6ICcxOS4wNS4xOTgxJyxcclxuICAgICAgfSxcclxuICAgICAgY2FyOiB7XHJcbiAgICAgICAgY2FySW1hZ2U6XHJcbiAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2ZpbGVzL3Byb2ZpbGVfcGhvdG9zL2QxZGY4OGRjLTYyYjYtNGJhNy05YTVmLTk2NjliZTkwNDBhMy5KUEVHJyxcclxuICAgICAgICBjYXJOdW1iZXI6ICcwMU8wMTBPTycsXHJcbiAgICAgIH0sXHJcbiAgICAgIGltYWdlczogW1xyXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMwMDAvdjEvZmlsZXMvcHJvZmlsZV9waG90b3MvZDFkZjg4ZGMtNjJiNi00YmE3LTlhNWYtOTY2OWJlOTA0MGEzLkpQRUcnLFxyXG4gICAgICBdLFxyXG4gICAgICAvLyBmdWxsSW1hZ2VzOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC92MS9maWxlcy9wcm9maWxlX3Bob3Rvcy9kMWRmODhkYy02MmI2LTRiYTctOWE1Zi05NjY5YmU5MDQwYTMuSlBFRyddLFxyXG4gICAgICBpbml0aWF0b3I6ICfQltCQ0JvQkNCa0KPQlNCj0JrQodCa0JjQmSDQoNCe0JLQlCcsXHJcbiAgICAgIGFkZHJlc3M6ICfQotGD0YDQutC40YHRgtC+0L0g0LrRntGH0LDRgdC4LCBEZWhxb24gYm96b3JpJyxcclxuICAgICAgdGV4dDogYFRlc3QgeGFiYXIgJHtNYXRoLnJhbmRvbSgpICogMTAwfS4gVGltZTogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCxcclxuXHJcbiAgICAgIG1lcmE6ICfQkNCg0JXQodCiJyxcclxuICAgICAgcmVnaW9uOiAn0J7Qm9Cc0JDQm9CY0Jog0KjQkNKy0KDQmCcsXHJcbiAgICAgIHN0YXR5YTogJzEzOSDRhy4zINC/LtCQOzE0MCDRhy4xJyxcclxuICAgICAgcm96VHlwZTogJ9Cc0JXQltCT0J7QodCj0JTQkNCg0KHQotCS0JXQndCd0KvQmSDQoCcsXHJcbiAgICAgIHNlbmRlcjoge1xyXG4gICAgICAgIGZpcnN0TmFtZTogJ01BTVVSQVhPTicsXHJcbiAgICAgICAgbGFzdE5hbWU6ICdBU0FET1ZBJyxcclxuICAgICAgICBtaWRkbGVOYW1lOiAnQ0hJUk1BU0hFVk5BJyxcclxuICAgICAgICBmdWxsTmFtZTogJ0FTQURPVkEgTUFNVVJBWE9OIENISVJNQVNIRVZOQScsXHJcbiAgICAgIH0sXHJcbiAgICAgIGxvY2F0aW9uOiBbNDAuODQ3NjQ2MzE0MDc0MzQsIDY5LjYxNzU3NjI4ODY0MTQ2XSxcclxuICAgICAgLy8gZnVsbEltYWdlOiAnaXZzc19pbWFnZXMvZnVsbF9pbWFnZV8wYWIxY2VjZS1kOGJjLTQyZWEtYWY2YS0wNjcyMDY4MTBkYmQuanBnJyxcclxuICAgICAgLy8gdGFrZW5JbWFnZTogJ2l2c3NfaW1hZ2VzL3Rha2VuX2ltYWdlXzQ3ZmJjNjAyLTY1ZWEtNDYwYS1iYmQ4LTA1MWM5ZGY5NDZmMC5qcGcnLFxyXG4gICAgICBvYmplY3ROYW1lOiAn0JTQtdGF0pvQvtC9INCx0L7Qt9C+0YDQuCcsXHJcbiAgICAgIHdhbnRlZERhdGU6IG5ldyBEYXRlKCcwNy4zMS4yMDE5JykudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcbiAgICBpZiAocmFuZG9tICUgMyA9PT0gMCkge1xyXG4gICAgICB3YW50ZWQudXNlciA9IG51bGw7XHJcbiAgICAgIHdhbnRlZC50eXBlID0gJ2Nhcic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB3YW50ZWQuY2FyID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBtZXNzYWdlID0ge1xyXG4gICAgICBtZXNzYWdlVHlwZTogJ3dhbnRlZCcsXHJcbiAgICAgIHRvOiB7IGNoYXRUeXBlOiAncHJpdmF0ZScsIGNoYXRJZDogY2hhdElkIH0sXHJcbiAgICAgIHdhbnRlZDogd2FudGVkLFxyXG4gICAgICB0ZXh0OiBudWxsLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGF3YWl0IG1lc3NlbmdlclxyXG4gICAgLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcywgJ1N1Y2Nlc3Mgc2VuZGVkJyk7XHJcbiAgICAgIHJldHVybiByZXMuZGF0YTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2U/LmRhdGEsICdlcnInKTtcclxuICAgIH0pO1xyXG59LCAxXzAwMCk7XHJcbiJdfQ==