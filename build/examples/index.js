import { __awaiter } from "tslib";
import axios from 'axios';
import { v1 as uuidV1 } from 'uuid';
// import { ENV } from '../common/config';
import { getMessenger } from '../index';
import { localStg } from '../utils';
import EventEmitter from 'events';
const e = new EventEmitter();
e.eventNames;
e.removeAllListeners;
e.removeListener;
const baseURL = 'http://localhost:7000';
const localUid = localStg.get('messengerDeviceUid');
const uid = localUid ? localUid : uuidV1();
localStg.set('messengerDeviceUid', uid);
const chatId = '66cc25d3c1875cfa0dddfa20'; // ! rm
const apiKey = 'qalqon';
const apiHash = '66b3576d917425b29a3e3644';
const messenger = getMessenger({
    baseURL,
    apiKey,
    apiHash,
    languageGetter() {
        return 'Uz-Latin';
    },
    token: () => __awaiter(void 0, void 0, void 0, function* () {
        const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjoyMDA5LCJ1c2VybmFtZSI6IlVtYXJiZWsiLCJmdWxsX25hbWUiOiJBS0JBUk9WIFVNQVIiLCJwaG9uZV9udW1iZXIiOiIrOTk4OTQ1NDM0NTY3IiwiZ3JvdXAiOnsiaWQiOjIsIm5hbWUiOiJBZG1pbiIsImFjY2Vzc2VzIjpbM119LCJvcmdhbml6YXRpb25faWQiOm51bGwsInNlcnZpY2VzIjpbeyJpZCI6MiwibmFtZSI6Im50ZmFjZSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NiwibmFtZSI6InhhdGxvdiIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MTQsIm5hbWUiOiJlbWVobW9uIiwic3RhdHVzIjp0cnVlfSx7ImlkIjoxNiwibmFtZSI6ImF1dG8tdHJhbnNwb3J0Iiwic3RhdHVzIjp0cnVlfSx7ImlkIjoxOCwibmFtZSI6ImFjY2lkZW50cyIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MjAsIm5hbWUiOiJkaGEiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjIxLCJuYW1lIjoiZm9ybWExIiwic3RhdHVzIjp0cnVlfSx7ImlkIjoyMiwibmFtZSI6Iml2c3MtbWFuYWdlciIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MjcsIm5hbWUiOiJxdWljay1zZWFyY2giLCJzdGF0dXMiOnRydWV9LHsiaWQiOjI5LCJuYW1lIjoiY2FtZXJhIiwic3RhdHVzIjp0cnVlfSx7ImlkIjozMCwibmFtZSI6ImZ2diIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6MzEsIm5hbWUiOiJncHMiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjMyLCJuYW1lIjoic2F5bG92Iiwic3RhdHVzIjp0cnVlfSx7ImlkIjozNCwibmFtZSI6Imxpc3RlZC1wZW9wbGUiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjM2LCJuYW1lIjoidGFkYmlyIiwic3RhdHVzIjp0cnVlfSx7ImlkIjozOCwibmFtZSI6Im10cCIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NDAsIm5hbWUiOiJjcmltZSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NDEsIm5hbWUiOiJjYXIiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjQyLCJuYW1lIjoib3BnIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0MywibmFtZSI6Im1pYiIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NDQsIm5hbWUiOiJzZXJ2aWNlIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0NSwibmFtZSI6Im5vdGlmaWNhdGlvbnMiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjQ2LCJuYW1lIjoidGVlbmFnZXJzIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0NywibmFtZSI6ImJ1cy1wYXJraW5nIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0OCwibmFtZSI6ImRldGVjdG9yIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo0OSwibmFtZSI6ImFkZC1jYW1lcmEiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjUwLCJuYW1lIjoiaXZzcy1jb250cm9sIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo1MSwibmFtZSI6IjV0YXNoYWJidXMiLCJzdGF0dXMiOnRydWV9LHsiaWQiOjUyLCJuYW1lIjoibG9nZ2VyIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo1MywibmFtZSI6InNjbyIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NTQsIm5hbWUiOiJsYW5ndWFnZSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NTUsIm5hbWUiOiJzdXBlcnZpc29yIiwic3RhdHVzIjp0cnVlfSx7ImlkIjo1NywibmFtZSI6Im15LWluc3BlY3RvciIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NTksIm5hbWUiOiJib2R5LWNhbWVyYSIsInN0YXR1cyI6dHJ1ZX0seyJpZCI6NjAsIm5hbWUiOiJlbWlncmFudCIsInN0YXR1cyI6dHJ1ZX1dLCJkaXN0cmljdElkIjpudWxsLCJoYXNoIjoiNTBiMDQ4N2E2ZWUyM2U1OWY4NGM5MDM2NzdhYTg5MmIifSwiaWF0IjoxNzI1ODYwNzk3LCJleHAiOjE3MjU5NDcxOTd9.xEEklY5567Tm4HYanVHp41kODkm_nkJTSjcC7iLCDcI';
        const { data } = yield axios.create({ baseURL }).get(`/v1/auth/me-from?token=${token}`, {
            headers: {
                Authorization: `Basic ${btoa(`${apiKey}:${apiHash}`)}`,
            },
        });
        return {
            access: data.data.token.accessToken,
            refresh: data.data.token.refreshToken,
        };
        // const res = await axios.post(
        //   `${baseURL}/v1/auth/login`,
        //   {
        //     username: 'Umarkhan', // Adhamjon, Umarkhan
        //     password: '123',
        //   },
        //   {
        //     headers: requiredHeaders,
        //   },
        // );
        // return {
        //   access: res.data.data.token.accessToken,
        //   refresh: res.data.data.token.refreshToken,
        // };
    }),
    // polling: { interval: 5_000, limit: 100 },
});
console.log('Success started');
messenger
    .on('connect', (args) => {
    console.log('connected', args);
})
    .on('reconnect_attempt', (...args) => {
    console.log('reconnect_attempt', args);
})
    .on('reconnect', (...args) => {
    console.log('reconnect', args);
})
    .on('disconnect', ({ reason, details }) => {
    console.log('disconnect', reason);
})
    .on('pong', () => {
    console.log('pong');
})
    .on('update', (data) => {
    console.log(data._id, 'update');
})
    .on('chatAction', (action) => {
    console.log(action, 'chatAction');
})
    .on('socketConnectionError', (err) => {
    console.log(err);
});
const getRadomNumber = (from, to) => from + Math.round(Math.random() * (to - from));
(() => __awaiter(void 0, void 0, void 0, function* () {
    let message;
    const random = getRadomNumber(0, 100);
    // const random = 3;
    if (random % 2 === 0) {
        message = {
            messageType: 'text',
            to: { chatType: 'private', chatId: chatId },
            text: `Test xabar ${Math.random() * 100}. Time: ${new Date().toISOString()}`,
        };
    }
    else {
        const wanted = {
            type: 'user',
            title: 'MVD-Qidiruv',
            databaseName: 'MVD-Qidiruv',
            pUser: {
                image: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                // fullImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                fullName: 'Qambarov Qumriniso Qulmiddin qizi',
                address: 'Qashqadaryo Viloyat, Kitob Tuman, Qashqir qishloq',
                passport: 'AA8432720',
                birthDate: '19.05.1981',
            },
            wantedUser: {
                image: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                // fullImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                fullName: 'Qambarov Qumriniso Qulmiddin qizi',
                address: 'Qashqadaryo Viloyat, Kitob Tuman, Qashqir qishloq',
                passport: 'AA8432720',
                birthDate: '19.05.1981',
            },
            car: {
                carImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
                carNumber: '01O010OO',
            },
            takenImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
            fullImage: 'http://localhost:3000/v1/files/profile_photos/d1df88dc-62b6-4ba7-9a5f-9669be9040a3.JPEG',
            initiator: 'ЖАЛАКУДУКСКИЙ РОВД',
            address: 'Туркистон кўчаси, Dehqon bozori',
            text: `Test xabar ${Math.random() * 100}. Time: ${new Date().toISOString()}`,
            mera: 'АРЕСТ',
            region: 'ОЛМАЛИК ШАҲРИ',
            statya: '139 ч.3 п.А;140 ч.1',
            rozType: 'МЕЖГОСУДАРСТВЕННЫЙ Р',
            location: [40.84764631407434, 69.61757628864146],
            // fullImage: 'ivss_images/full_image_0ab1cece-d8bc-42ea-af6a-067206810dbd.jpg',
            // takenImage: 'ivss_images/taken_image_47fbc602-65ea-460a-bbd8-051c9df946f0.jpg',
            objectName: 'Дехқон бозори',
            wantedDate: new Date('07.31.2019').toISOString(),
        };
        if (random % 3 === 0) {
            wanted.pUser = null;
            wanted.wantedUser = null;
            wanted.type = 'car';
        }
        else {
            wanted.car = null;
        }
        message = {
            messageType: 'wanted',
            to: { chatType: 'private', chatId: chatId },
            wanted: wanted,
            text: null,
        };
    }
    yield new Promise((res) => messenger.on('connect', res));
    // await messenger
    //   .sendMessage(message)
    //   .then((res) => {
    //     console.log(res, 'Success sended');
    //     return res.data;
    //   })
    //   .catch((err) => {
    //     console.log(err.response?.data, 'err');
    //   });
}))();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXhhbXBsZXMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMxQixPQUFPLEVBQUUsRUFBRSxJQUFJLE1BQU0sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwQywwQ0FBMEM7QUFDMUMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUd4QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQ3BDLE9BQU8sWUFBWSxNQUFNLFFBQVEsQ0FBQztBQUVsQyxNQUFNLENBQUMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0FBQzdCLENBQUMsQ0FBQyxVQUFVLENBQUM7QUFDYixDQUFDLENBQUMsa0JBQWtCLENBQUM7QUFDckIsQ0FBQyxDQUFDLGNBQWMsQ0FBQztBQUVqQixNQUFNLE9BQU8sR0FBRyx1QkFBdUIsQ0FBQztBQUN4QyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDcEQsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzNDLFFBQVEsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFeEMsTUFBTSxNQUFNLEdBQUcsMEJBQTBCLENBQUMsQ0FBQyxPQUFPO0FBRWxELE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQztBQUN4QixNQUFNLE9BQU8sR0FBRywwQkFBMEIsQ0FBQztBQUMzQyxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUM7SUFDN0IsT0FBTztJQUNQLE1BQU07SUFDTixPQUFPO0lBQ1AsY0FBYztRQUNaLE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7SUFDRCxLQUFLLEVBQUUsR0FHSixFQUFFO1FBQ0gsTUFBTSxLQUFLLEdBQ1QsdTFFQUF1MUUsQ0FBQztRQUMxMUUsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLDBCQUEwQixLQUFLLEVBQUUsRUFBRTtZQUN0RixPQUFPLEVBQUU7Z0JBQ1AsYUFBYSxFQUFFLFNBQVMsSUFBSSxDQUFDLEdBQUcsTUFBTSxJQUFJLE9BQU8sRUFBRSxDQUFDLEVBQUU7YUFDdkQ7U0FDRixDQUFDLENBQUM7UUFFSCxPQUFPO1lBQ0wsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVc7WUFDbkMsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVk7U0FDdEMsQ0FBQztRQUNGLGdDQUFnQztRQUNoQyxnQ0FBZ0M7UUFDaEMsTUFBTTtRQUNOLGtEQUFrRDtRQUNsRCx1QkFBdUI7UUFDdkIsT0FBTztRQUNQLE1BQU07UUFDTixnQ0FBZ0M7UUFDaEMsT0FBTztRQUNQLEtBQUs7UUFFTCxXQUFXO1FBQ1gsNkNBQTZDO1FBQzdDLCtDQUErQztRQUMvQyxLQUFLO0lBQ1AsQ0FBQyxDQUFBO0lBQ0QsNENBQTRDO0NBQzdDLENBQUMsQ0FBQztBQUVILE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUUvQixTQUFTO0tBQ04sRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0lBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ2pDLENBQUMsQ0FBQztLQUNELEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLEVBQUU7SUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN6QyxDQUFDLENBQUM7S0FDRCxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsRUFBRTtJQUMzQixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNqQyxDQUFDLENBQUM7S0FDRCxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUN4QyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUM7S0FDRCxFQUFFLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtJQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdEIsQ0FBQyxDQUFDO0tBQ0QsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQWUsRUFBRSxFQUFFO0lBQ2hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNsQyxDQUFDLENBQUM7S0FDRCxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUU7SUFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDcEMsQ0FBQyxDQUFDO0tBQ0QsRUFBRSxDQUFDLHVCQUF1QixFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUU7SUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNuQixDQUFDLENBQUMsQ0FBQztBQUVMLE1BQU0sY0FBYyxHQUFHLENBQUMsSUFBWSxFQUFFLEVBQVUsRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7QUFFcEcsQ0FBQyxHQUFTLEVBQUU7SUFDVixJQUFJLE9BQXFCLENBQUM7SUFDMUIsTUFBTSxNQUFNLEdBQUcsY0FBYyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0QyxvQkFBb0I7SUFDcEIsSUFBSSxNQUFNLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQ3JCLE9BQU8sR0FBRztZQUNSLFdBQVcsRUFBRSxNQUFNO1lBQ25CLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtZQUMzQyxJQUFJLEVBQUUsY0FBYyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxXQUFXLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLEVBQUU7U0FDN0UsQ0FBQztJQUNKLENBQUM7U0FBTSxDQUFDO1FBQ04sTUFBTSxNQUFNLEdBQTJCO1lBQ3JDLElBQUksRUFBRSxNQUFNO1lBQ1osS0FBSyxFQUFFLGFBQWE7WUFDcEIsWUFBWSxFQUFFLGFBQWE7WUFDM0IsS0FBSyxFQUFFO2dCQUNMLEtBQUssRUFDSCx5RkFBeUY7Z0JBQzNGLHdHQUF3RztnQkFDeEcsUUFBUSxFQUFFLG1DQUFtQztnQkFDN0MsT0FBTyxFQUFFLG1EQUFtRDtnQkFDNUQsUUFBUSxFQUFFLFdBQVc7Z0JBQ3JCLFNBQVMsRUFBRSxZQUFZO2FBQ3hCO1lBQ0QsVUFBVSxFQUFFO2dCQUNWLEtBQUssRUFDSCx5RkFBeUY7Z0JBQzNGLHdHQUF3RztnQkFDeEcsUUFBUSxFQUFFLG1DQUFtQztnQkFDN0MsT0FBTyxFQUFFLG1EQUFtRDtnQkFDNUQsUUFBUSxFQUFFLFdBQVc7Z0JBQ3JCLFNBQVMsRUFBRSxZQUFZO2FBQ3hCO1lBQ0QsR0FBRyxFQUFFO2dCQUNILFFBQVEsRUFDTix5RkFBeUY7Z0JBQzNGLFNBQVMsRUFBRSxVQUFVO2FBQ3RCO1lBQ0QsVUFBVSxFQUNSLHlGQUF5RjtZQUMzRixTQUFTLEVBQ1AseUZBQXlGO1lBQzNGLFNBQVMsRUFBRSxvQkFBb0I7WUFDL0IsT0FBTyxFQUFFLGlDQUFpQztZQUMxQyxJQUFJLEVBQUUsY0FBYyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxXQUFXLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLEVBQUU7WUFFNUUsSUFBSSxFQUFFLE9BQU87WUFDYixNQUFNLEVBQUUsZUFBZTtZQUN2QixNQUFNLEVBQUUscUJBQXFCO1lBQzdCLE9BQU8sRUFBRSxzQkFBc0I7WUFDL0IsUUFBUSxFQUFFLENBQUMsaUJBQWlCLEVBQUUsaUJBQWlCLENBQUM7WUFDaEQsZ0ZBQWdGO1lBQ2hGLGtGQUFrRjtZQUNsRixVQUFVLEVBQUUsZUFBZTtZQUMzQixVQUFVLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsV0FBVyxFQUFFO1NBQ2pELENBQUM7UUFDRixJQUFJLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDckIsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDcEIsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7WUFDekIsTUFBTSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7UUFDdEIsQ0FBQzthQUFNLENBQUM7WUFDTixNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztRQUNwQixDQUFDO1FBRUQsT0FBTyxHQUFHO1lBQ1IsV0FBVyxFQUFFLFFBQVE7WUFDckIsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO1lBQzNDLE1BQU0sRUFBRSxNQUFNO1lBQ2QsSUFBSSxFQUFFLElBQUk7U0FDWCxDQUFDO0lBQ0osQ0FBQztJQUVELE1BQU0sSUFBSSxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFFekQsa0JBQWtCO0lBQ2xCLDBCQUEwQjtJQUMxQixxQkFBcUI7SUFDckIsMENBQTBDO0lBQzFDLHVCQUF1QjtJQUN2QixPQUFPO0lBQ1Asc0JBQXNCO0lBQ3RCLDhDQUE4QztJQUM5QyxRQUFRO0FBQ1YsQ0FBQyxDQUFBLENBQUMsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuaW1wb3J0IHsgdjEgYXMgdXVpZFYxIH0gZnJvbSAndXVpZCc7XHJcbi8vIGltcG9ydCB7IEVOViB9IGZyb20gJy4uL2NvbW1vbi9jb25maWcnO1xyXG5pbXBvcnQgeyBnZXRNZXNzZW5nZXIgfSBmcm9tICcuLi9pbmRleCc7XHJcbmltcG9ydCB7IElTZW5kQ2hhdE1lc3NhZ2VXYW50ZWQsIElTZW5kTWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzL2FwaS9tZXNzYWdlJztcclxuaW1wb3J0IHsgSU9uVXBkYXRlIH0gZnJvbSAnLi4vdHlwZXMvYXBpL21lc3NhZ2UudHlwZXMnO1xyXG5pbXBvcnQgeyBsb2NhbFN0ZyB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnO1xyXG5cclxuY29uc3QgZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuZS5ldmVudE5hbWVzO1xyXG5lLnJlbW92ZUFsbExpc3RlbmVycztcclxuZS5yZW1vdmVMaXN0ZW5lcjtcclxuXHJcbmNvbnN0IGJhc2VVUkwgPSAnaHR0cDovL2xvY2FsaG9zdDo3MDAwJztcclxuY29uc3QgbG9jYWxVaWQgPSBsb2NhbFN0Zy5nZXQoJ21lc3NlbmdlckRldmljZVVpZCcpO1xyXG5jb25zdCB1aWQgPSBsb2NhbFVpZCA/IGxvY2FsVWlkIDogdXVpZFYxKCk7XHJcbmxvY2FsU3RnLnNldCgnbWVzc2VuZ2VyRGV2aWNlVWlkJywgdWlkKTtcclxuXHJcbmNvbnN0IGNoYXRJZCA9ICc2NmNjMjVkM2MxODc1Y2ZhMGRkZGZhMjAnOyAvLyAhIHJtXHJcblxyXG5jb25zdCBhcGlLZXkgPSAncWFscW9uJztcclxuY29uc3QgYXBpSGFzaCA9ICc2NmIzNTc2ZDkxNzQyNWIyOWEzZTM2NDQnO1xyXG5jb25zdCBtZXNzZW5nZXIgPSBnZXRNZXNzZW5nZXIoe1xyXG4gIGJhc2VVUkwsXHJcbiAgYXBpS2V5LFxyXG4gIGFwaUhhc2gsXHJcbiAgbGFuZ3VhZ2VHZXR0ZXIoKSB7XHJcbiAgICByZXR1cm4gJ1V6LUxhdGluJztcclxuICB9LFxyXG4gIHRva2VuOiBhc3luYyAoKTogUHJvbWlzZTx7XHJcbiAgICBhY2Nlc3M6IHN0cmluZztcclxuICAgIHJlZnJlc2g6IHN0cmluZztcclxuICB9PiA9PiB7XHJcbiAgICBjb25zdCB0b2tlbiA9XHJcbiAgICAgICdleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKMWMyVnlJanA3SW1sa0lqb3lNREE1TENKMWMyVnlibUZ0WlNJNklsVnRZWEppWldzaUxDSm1kV3hzWDI1aGJXVWlPaUpCUzBKQlVrOVdJRlZOUVZJaUxDSndhRzl1WlY5dWRXMWlaWElpT2lJck9UazRPVFExTkRNME5UWTNJaXdpWjNKdmRYQWlPbnNpYVdRaU9qSXNJbTVoYldVaU9pSkJaRzFwYmlJc0ltRmpZMlZ6YzJWeklqcGJNMTE5TENKdmNtZGhibWw2WVhScGIyNWZhV1FpT201MWJHd3NJbk5sY25acFkyVnpJanBiZXlKcFpDSTZNaXdpYm1GdFpTSTZJbTUwWm1GalpTSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2Tml3aWJtRnRaU0k2SW5oaGRHeHZkaUlzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk1UUXNJbTVoYldVaU9pSmxiV1ZvYlc5dUlpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam94Tml3aWJtRnRaU0k2SW1GMWRHOHRkSEpoYm5Od2IzSjBJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpveE9Dd2libUZ0WlNJNkltRmpZMmxrWlc1MGN5SXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TWpBc0ltNWhiV1VpT2lKa2FHRWlMQ0p6ZEdGMGRYTWlPblJ5ZFdWOUxIc2lhV1FpT2pJeExDSnVZVzFsSWpvaVptOXliV0V4SWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqb3lNaXdpYm1GdFpTSTZJbWwyYzNNdGJXRnVZV2RsY2lJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZNamNzSW01aGJXVWlPaUp4ZFdsamF5MXpaV0Z5WTJnaUxDSnpkR0YwZFhNaU9uUnlkV1Y5TEhzaWFXUWlPakk1TENKdVlXMWxJam9pWTJGdFpYSmhJaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvek1Dd2libUZ0WlNJNkltWjJkaUlzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk16RXNJbTVoYldVaU9pSm5jSE1pTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qTXlMQ0p1WVcxbElqb2ljMkY1Ykc5Mklpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam96TkN3aWJtRnRaU0k2SW14cGMzUmxaQzF3Wlc5d2JHVWlMQ0p6ZEdGMGRYTWlPblJ5ZFdWOUxIc2lhV1FpT2pNMkxDSnVZVzFsSWpvaWRHRmtZbWx5SWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqb3pPQ3dpYm1GdFpTSTZJbTEwY0NJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZOREFzSW01aGJXVWlPaUpqY21sdFpTSXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TkRFc0ltNWhiV1VpT2lKallYSWlMQ0p6ZEdGMGRYTWlPblJ5ZFdWOUxIc2lhV1FpT2pReUxDSnVZVzFsSWpvaWIzQm5JaXdpYzNSaGRIVnpJanAwY25WbGZTeDdJbWxrSWpvME15d2libUZ0WlNJNkltMXBZaUlzSW5OMFlYUjFjeUk2ZEhKMVpYMHNleUpwWkNJNk5EUXNJbTVoYldVaU9pSnpaWEoyYVdObElpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8wTlN3aWJtRnRaU0k2SW01dmRHbG1hV05oZEdsdmJuTWlMQ0p6ZEdGMGRYTWlPblJ5ZFdWOUxIc2lhV1FpT2pRMkxDSnVZVzFsSWpvaWRHVmxibUZuWlhKeklpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8wTnl3aWJtRnRaU0k2SW1KMWN5MXdZWEpyYVc1bklpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8wT0N3aWJtRnRaU0k2SW1SbGRHVmpkRzl5SWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqbzBPU3dpYm1GdFpTSTZJbUZrWkMxallXMWxjbUVpTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qVXdMQ0p1WVcxbElqb2lhWFp6Y3kxamIyNTBjbTlzSWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqbzFNU3dpYm1GdFpTSTZJalYwWVhOb1lXSmlkWE1pTENKemRHRjBkWE1pT25SeWRXVjlMSHNpYVdRaU9qVXlMQ0p1WVcxbElqb2liRzluWjJWeUlpd2ljM1JoZEhWeklqcDBjblZsZlN4N0ltbGtJam8xTXl3aWJtRnRaU0k2SW5OamJ5SXNJbk4wWVhSMWN5STZkSEoxWlgwc2V5SnBaQ0k2TlRRc0ltNWhiV1VpT2lKc1lXNW5kV0ZuWlNJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZOVFVzSW01aGJXVWlPaUp6ZFhCbGNuWnBjMjl5SWl3aWMzUmhkSFZ6SWpwMGNuVmxmU3g3SW1sa0lqbzFOeXdpYm1GdFpTSTZJbTE1TFdsdWMzQmxZM1J2Y2lJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZOVGtzSW01aGJXVWlPaUppYjJSNUxXTmhiV1Z5WVNJc0luTjBZWFIxY3lJNmRISjFaWDBzZXlKcFpDSTZOakFzSW01aGJXVWlPaUpsYldsbmNtRnVkQ0lzSW5OMFlYUjFjeUk2ZEhKMVpYMWRMQ0prYVhOMGNtbGpkRWxrSWpwdWRXeHNMQ0pvWVhOb0lqb2lOVEJpTURRNE4yRTJaV1V5TTJVMU9XWTROR001TURNMk56ZGhZVGc1TW1JaWZTd2lhV0YwSWpveE56STFPRFl3TnprM0xDSmxlSEFpT2pFM01qVTVORGN4T1RkOS54RUVrbFk1NTY3VG00SFlhblZIcDQxa09Ea21fbmtKVFNqY0M3aUxDRGNJJztcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuY3JlYXRlKHsgYmFzZVVSTCB9KS5nZXQoYC92MS9hdXRoL21lLWZyb20/dG9rZW49JHt0b2tlbn1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtidG9hKGAke2FwaUtleX06JHthcGlIYXNofWApfWAsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhY2Nlc3M6IGRhdGEuZGF0YS50b2tlbi5hY2Nlc3NUb2tlbixcclxuICAgICAgcmVmcmVzaDogZGF0YS5kYXRhLnRva2VuLnJlZnJlc2hUb2tlbixcclxuICAgIH07XHJcbiAgICAvLyBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KFxyXG4gICAgLy8gICBgJHtiYXNlVVJMfS92MS9hdXRoL2xvZ2luYCxcclxuICAgIC8vICAge1xyXG4gICAgLy8gICAgIHVzZXJuYW1lOiAnVW1hcmtoYW4nLCAvLyBBZGhhbWpvbiwgVW1hcmtoYW5cclxuICAgIC8vICAgICBwYXNzd29yZDogJzEyMycsXHJcbiAgICAvLyAgIH0sXHJcbiAgICAvLyAgIHtcclxuICAgIC8vICAgICBoZWFkZXJzOiByZXF1aXJlZEhlYWRlcnMsXHJcbiAgICAvLyAgIH0sXHJcbiAgICAvLyApO1xyXG5cclxuICAgIC8vIHJldHVybiB7XHJcbiAgICAvLyAgIGFjY2VzczogcmVzLmRhdGEuZGF0YS50b2tlbi5hY2Nlc3NUb2tlbixcclxuICAgIC8vICAgcmVmcmVzaDogcmVzLmRhdGEuZGF0YS50b2tlbi5yZWZyZXNoVG9rZW4sXHJcbiAgICAvLyB9O1xyXG4gIH0sXHJcbiAgLy8gcG9sbGluZzogeyBpbnRlcnZhbDogNV8wMDAsIGxpbWl0OiAxMDAgfSxcclxufSk7XHJcblxyXG5jb25zb2xlLmxvZygnU3VjY2VzcyBzdGFydGVkJyk7XHJcblxyXG5tZXNzZW5nZXJcclxuICAub24oJ2Nvbm5lY3QnLCAoYXJncykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ2Nvbm5lY3RlZCcsIGFyZ3MpO1xyXG4gIH0pXHJcbiAgLm9uKCdyZWNvbm5lY3RfYXR0ZW1wdCcsICguLi5hcmdzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygncmVjb25uZWN0X2F0dGVtcHQnLCBhcmdzKTtcclxuICB9KVxyXG4gIC5vbigncmVjb25uZWN0JywgKC4uLmFyZ3MpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdyZWNvbm5lY3QnLCBhcmdzKTtcclxuICB9KVxyXG4gIC5vbignZGlzY29ubmVjdCcsICh7IHJlYXNvbiwgZGV0YWlscyB9KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnZGlzY29ubmVjdCcsIHJlYXNvbik7XHJcbiAgfSlcclxuICAub24oJ3BvbmcnLCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygncG9uZycpO1xyXG4gIH0pXHJcbiAgLm9uKCd1cGRhdGUnLCAoZGF0YTogSU9uVXBkYXRlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhLl9pZCwgJ3VwZGF0ZScpO1xyXG4gIH0pXHJcbiAgLm9uKCdjaGF0QWN0aW9uJywgKGFjdGlvbikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYWN0aW9uLCAnY2hhdEFjdGlvbicpO1xyXG4gIH0pXHJcbiAgLm9uKCdzb2NrZXRDb25uZWN0aW9uRXJyb3InLCAoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgZ2V0UmFkb21OdW1iZXIgPSAoZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKSA9PiBmcm9tICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKHRvIC0gZnJvbSkpO1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICBsZXQgbWVzc2FnZTogSVNlbmRNZXNzYWdlO1xyXG4gIGNvbnN0IHJhbmRvbSA9IGdldFJhZG9tTnVtYmVyKDAsIDEwMCk7XHJcbiAgLy8gY29uc3QgcmFuZG9tID0gMztcclxuICBpZiAocmFuZG9tICUgMiA9PT0gMCkge1xyXG4gICAgbWVzc2FnZSA9IHtcclxuICAgICAgbWVzc2FnZVR5cGU6ICd0ZXh0JyxcclxuICAgICAgdG86IHsgY2hhdFR5cGU6ICdwcml2YXRlJywgY2hhdElkOiBjaGF0SWQgfSxcclxuICAgICAgdGV4dDogYFRlc3QgeGFiYXIgJHtNYXRoLnJhbmRvbSgpICogMTAwfS4gVGltZTogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9YCxcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHdhbnRlZDogSVNlbmRDaGF0TWVzc2FnZVdhbnRlZCA9IHtcclxuICAgICAgdHlwZTogJ3VzZXInLFxyXG4gICAgICB0aXRsZTogJ01WRC1RaWRpcnV2JyxcclxuICAgICAgZGF0YWJhc2VOYW1lOiAnTVZELVFpZGlydXYnLFxyXG4gICAgICBwVXNlcjoge1xyXG4gICAgICAgIGltYWdlOlxyXG4gICAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC92MS9maWxlcy9wcm9maWxlX3Bob3Rvcy9kMWRmODhkYy02MmI2LTRiYTctOWE1Zi05NjY5YmU5MDQwYTMuSlBFRycsXHJcbiAgICAgICAgLy8gZnVsbEltYWdlOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2ZpbGVzL3Byb2ZpbGVfcGhvdG9zL2QxZGY4OGRjLTYyYjYtNGJhNy05YTVmLTk2NjliZTkwNDBhMy5KUEVHJyxcclxuICAgICAgICBmdWxsTmFtZTogJ1FhbWJhcm92IFF1bXJpbmlzbyBRdWxtaWRkaW4gcWl6aScsXHJcbiAgICAgICAgYWRkcmVzczogJ1Fhc2hxYWRhcnlvIFZpbG95YXQsIEtpdG9iIFR1bWFuLCBRYXNocWlyIHFpc2hsb3EnLFxyXG4gICAgICAgIHBhc3Nwb3J0OiAnQUE4NDMyNzIwJyxcclxuICAgICAgICBiaXJ0aERhdGU6ICcxOS4wNS4xOTgxJyxcclxuICAgICAgfSxcclxuICAgICAgd2FudGVkVXNlcjoge1xyXG4gICAgICAgIGltYWdlOlxyXG4gICAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC92MS9maWxlcy9wcm9maWxlX3Bob3Rvcy9kMWRmODhkYy02MmI2LTRiYTctOWE1Zi05NjY5YmU5MDQwYTMuSlBFRycsXHJcbiAgICAgICAgLy8gZnVsbEltYWdlOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2ZpbGVzL3Byb2ZpbGVfcGhvdG9zL2QxZGY4OGRjLTYyYjYtNGJhNy05YTVmLTk2NjliZTkwNDBhMy5KUEVHJyxcclxuICAgICAgICBmdWxsTmFtZTogJ1FhbWJhcm92IFF1bXJpbmlzbyBRdWxtaWRkaW4gcWl6aScsXHJcbiAgICAgICAgYWRkcmVzczogJ1Fhc2hxYWRhcnlvIFZpbG95YXQsIEtpdG9iIFR1bWFuLCBRYXNocWlyIHFpc2hsb3EnLFxyXG4gICAgICAgIHBhc3Nwb3J0OiAnQUE4NDMyNzIwJyxcclxuICAgICAgICBiaXJ0aERhdGU6ICcxOS4wNS4xOTgxJyxcclxuICAgICAgfSxcclxuICAgICAgY2FyOiB7XHJcbiAgICAgICAgY2FySW1hZ2U6XHJcbiAgICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2ZpbGVzL3Byb2ZpbGVfcGhvdG9zL2QxZGY4OGRjLTYyYjYtNGJhNy05YTVmLTk2NjliZTkwNDBhMy5KUEVHJyxcclxuICAgICAgICBjYXJOdW1iZXI6ICcwMU8wMTBPTycsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRha2VuSW1hZ2U6XHJcbiAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC92MS9maWxlcy9wcm9maWxlX3Bob3Rvcy9kMWRmODhkYy02MmI2LTRiYTctOWE1Zi05NjY5YmU5MDQwYTMuSlBFRycsXHJcbiAgICAgIGZ1bGxJbWFnZTpcclxuICAgICAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3YxL2ZpbGVzL3Byb2ZpbGVfcGhvdG9zL2QxZGY4OGRjLTYyYjYtNGJhNy05YTVmLTk2NjliZTkwNDBhMy5KUEVHJyxcclxuICAgICAgaW5pdGlhdG9yOiAn0JbQkNCb0JDQmtCj0JTQo9Ca0KHQmtCY0Jkg0KDQntCS0JQnLFxyXG4gICAgICBhZGRyZXNzOiAn0KLRg9GA0LrQuNGB0YLQvtC9INC60Z7Rh9Cw0YHQuCwgRGVocW9uIGJvem9yaScsXHJcbiAgICAgIHRleHQ6IGBUZXN0IHhhYmFyICR7TWF0aC5yYW5kb20oKSAqIDEwMH0uIFRpbWU6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfWAsXHJcblxyXG4gICAgICBtZXJhOiAn0JDQoNCV0KHQoicsXHJcbiAgICAgIHJlZ2lvbjogJ9Ce0JvQnNCQ0JvQmNCaINCo0JDSstCg0JgnLFxyXG4gICAgICBzdGF0eWE6ICcxMzkg0YcuMyDQvy7QkDsxNDAg0YcuMScsXHJcbiAgICAgIHJvelR5cGU6ICfQnNCV0JbQk9Ce0KHQo9CU0JDQoNCh0KLQktCV0J3QndCr0Jkg0KAnLFxyXG4gICAgICBsb2NhdGlvbjogWzQwLjg0NzY0NjMxNDA3NDM0LCA2OS42MTc1NzYyODg2NDE0Nl0sXHJcbiAgICAgIC8vIGZ1bGxJbWFnZTogJ2l2c3NfaW1hZ2VzL2Z1bGxfaW1hZ2VfMGFiMWNlY2UtZDhiYy00MmVhLWFmNmEtMDY3MjA2ODEwZGJkLmpwZycsXHJcbiAgICAgIC8vIHRha2VuSW1hZ2U6ICdpdnNzX2ltYWdlcy90YWtlbl9pbWFnZV80N2ZiYzYwMi02NWVhLTQ2MGEtYmJkOC0wNTFjOWRmOTQ2ZjAuanBnJyxcclxuICAgICAgb2JqZWN0TmFtZTogJ9CU0LXRhdKb0L7QvSDQsdC+0LfQvtGA0LgnLFxyXG4gICAgICB3YW50ZWREYXRlOiBuZXcgRGF0ZSgnMDcuMzEuMjAxOScpLnRvSVNPU3RyaW5nKCksXHJcbiAgICB9O1xyXG4gICAgaWYgKHJhbmRvbSAlIDMgPT09IDApIHtcclxuICAgICAgd2FudGVkLnBVc2VyID0gbnVsbDtcclxuICAgICAgd2FudGVkLndhbnRlZFVzZXIgPSBudWxsO1xyXG4gICAgICB3YW50ZWQudHlwZSA9ICdjYXInO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd2FudGVkLmNhciA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbWVzc2FnZSA9IHtcclxuICAgICAgbWVzc2FnZVR5cGU6ICd3YW50ZWQnLFxyXG4gICAgICB0bzogeyBjaGF0VHlwZTogJ3ByaXZhdGUnLCBjaGF0SWQ6IGNoYXRJZCB9LFxyXG4gICAgICB3YW50ZWQ6IHdhbnRlZCxcclxuICAgICAgdGV4dDogbnVsbCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBtZXNzZW5nZXIub24oJ2Nvbm5lY3QnLCByZXMpKTtcclxuXHJcbiAgLy8gYXdhaXQgbWVzc2VuZ2VyXHJcbiAgLy8gICAuc2VuZE1lc3NhZ2UobWVzc2FnZSlcclxuICAvLyAgIC50aGVuKChyZXMpID0+IHtcclxuICAvLyAgICAgY29uc29sZS5sb2cocmVzLCAnU3VjY2VzcyBzZW5kZWQnKTtcclxuICAvLyAgICAgcmV0dXJuIHJlcy5kYXRhO1xyXG4gIC8vICAgfSlcclxuICAvLyAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgLy8gICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZT8uZGF0YSwgJ2VycicpO1xyXG4gIC8vICAgfSk7XHJcbn0pKCk7XHJcbiJdfQ==